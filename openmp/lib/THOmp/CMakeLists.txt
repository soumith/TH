INCLUDE_DIRECTORIES("${Torch_SOURCE_DIR}/libraries/TH")
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}")

SET(src 
  THOmpLabConv.c)

SET(src ${src})

ADD_LIBRARY(THOmp SHARED ${src})
TARGET_LINK_LIBRARIES(THOmp TH)

INSTALL(TARGETS THOmp
          RUNTIME DESTINATION "${Torch_INSTALL_BIN_SUBDIR}"
          LIBRARY DESTINATION "${Torch_INSTALL_LIB_SUBDIR}"
          ARCHIVE DESTINATION "${Torch_INSTALL_LIB_SUBDIR}")
INSTALL(FILES
	THOmpLabConv.h
        DESTINATION "${Torch_INSTALL_INCLUDE_SUBDIR}/THOmp")

INSTALL(FILES
          generic/THOmpLabConv.h
        DESTINATION "${Torch_INSTALL_INCLUDE_SUBDIR}/THOmp/generic")
